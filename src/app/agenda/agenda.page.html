<ion-content [fullscreen]="true" class="agenda-content">
  <div class="pb-20">
    <!-- Header -->
    <div class="header-gradient">
      <h2 class="header-title">Schedule</h2>
      <img src="assets/calig.png" alt="" class="header-overlay" />
    </div>

    <!-- Day Selector - Floating Tabs -->
    <div class="day-selector">
      <div class="day-selector-wrapper">
        <button
          *ngFor="let day of ['1', '2', '3']"
          class="day-btn"
          [class.active]="selectedDay === day"
          (click)="setSelectedDay(day)">
          Day {{day}}
        </button>
      </div>
    </div>

    <!-- Sessions List -->
<!-- Sessions List -->
<div class="sessions-container">
  <ng-container *ngIf="getFilteredSessions().length > 0; else noSessions">
    <div
      *ngFor="let session of getFilteredSessions()"
      class="session-card"
      [style.border-left-color]="session.color">
      
      <!-- Session Time Badge -->
      <div class="time-badge" [style.background-color]="session.color">
        <ion-icon name="time-outline" class="time-icon"></ion-icon>
        {{ session.startTime.toDate() | date:'shortTime' }}
      </div>

      <!-- Session Content -->
      <div class="session-content">
        <!-- Category Tag -->
        <div class="session-tags">
          <span class="category-tag" [style.background-color]="session.color + '20'" [style.color]="session.color">
            {{ formatCategory(session.category) }}
          </span>
        </div>

        <!-- Title -->
        <h3 class="session-title">{{ session.title }}</h3>

        <!-- Speaker Info -->
        <div class="speaker-info" *ngIf="session.speaker?.name && session.speaker?.name?.toLowerCase() !== 'all'">
          <div class="speaker-avatar" *ngIf="!session.speaker?.photoURL || session.speaker?.photoURL === 'null'">
            {{ session.speaker?.name?.[0] || '' }}{{ (session.speaker?.name?.split(' ')?.[1] || '')?.[0] || '' }}
          </div>
          <img *ngIf="session.speaker?.photoURL && session.speaker?.photoURL !== 'null'"
               [src]="session.speaker?.photoURL"
               alt="{{ session.speaker?.name }}"
               class="speaker-avatar-img" />
          <div class="speaker-details">
            <div class="speaker-label">Speaker</div>
            <div class="speaker-name">{{ session.speaker?.name }}</div>
            <div class="speaker-role">{{ session.speaker?.title }}</div>
          </div>
        </div>

        <!-- Session Meta Info -->
        <div class="session-meta-grid">
          <div class="meta-card">
            <ion-icon name="time-outline" class="meta-icon"></ion-icon>
            <div class="meta-content">
              <div class="meta-label">Duration</div>
              <div class="meta-value">{{ formatSessionTime(session) }}</div>
            </div>
          </div>
          
          <div class="meta-card">
            <ion-icon name="location-outline" class="meta-icon"></ion-icon>
            <div class="meta-content">
              <div class="meta-label">Location</div>
              <div class="meta-value">{{ session.location }}</div>
            </div>
          </div>
        </div>

        <!-- Materials Section -->
        <div class="materials-section" *ngIf="session.materials && session.materials.length > 0">
          <div class="materials-header">
            <div class="materials-title">
              <ion-icon name="folder-outline" class="folder-icon"></ion-icon>
              <span>Session Materials ({{ session.materials.length }})</span>
            </div>
          </div>
          
          <div class="materials-grid">
            <div
              *ngFor="let material of session.materials"
              class="material-card"
              (click)="viewMaterial(material)">
              <div class="material-icon-wrapper" [style.background-color]="session.color + '15'">
                <ion-icon [name]="getMaterialIcon(material.type)" 
                          class="material-icon"
                          [style.color]="session.color"></ion-icon>
              </div>
              <div class="material-info">
                <div class="material-name">{{ material.name }}</div>
                <div class="material-meta">
                  <span class="material-type">{{ material.type }}</span>
                  <span class="material-divider">â€¢</span>
                  <span class="material-size">{{ material.size }}</span>
                </div>
              </div>
              <button 
                class="material-download-btn"
                (click)="downloadMaterial($event, material)"
                [style.color]="session.color">
                <ion-icon name="download-outline"></ion-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- No Sessions Message -->
  <ng-template #noSessions>
    <div class="no-sessions">
      <div class="no-sessions-icon">
        <ion-icon name="calendar-clear-outline"></ion-icon>
      </div>
      <h3 class="no-sessions-title">No Sessions Scheduled</h3>
      <p class="no-sessions-text">There are no sessions scheduled for Day {{ selectedDay }}.<br>
      Check other days or come back later for updates!</p>
    </div>
  </ng-template>
</div>
